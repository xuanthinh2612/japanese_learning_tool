<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}WordApp{% endblock %}</title>

    <!-- Link CSS chung -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style-base.css') }}">

    <!-- CSS riÃªng cho page -->
    {% block extra_css %}{% endblock %}

    {% block head %}{% endblock %}
    <style>
        .layout {
            display: flex;
            margin-top: 50px;
            /* trÃ¡nh navbar fixed */
            min-height: calc(100vh - 50px);
        }

        .sidebar {
            z-index: 1000;
            position: fixed;
            top: 50px;
            /* navbar */
            left: 0;

            width: 230px;
            height: calc(100vh - 50px);
            padding: 0px 20px;

            background: #d7edef;
            color: #106b1c;

            overflow-y: auto;
            overflow-x: hidden;

            /* Scroll bar */
            scrollbar-width: thin;
            /* Firefox */
            scrollbar-color: rgba(0, 0, 0, 0.137) transparent;
            /* mÃ u thanh vÃ  background */

            transform: translateX(-100%);
            /* áº©n bÃªn trÃ¡i */
            transition: transform 0.3s ease;
        }

        /* Scroll máº£nh, má» cho Chrome/Safari/Edge */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.5);
        }

        /* Firefox */
        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.25) transparent;
        }

        /* Chrome/Safari/Edge */
        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 3px;

            /* Thu ngáº¯n chiá»u dÃ i thanh scroll */
            min-height: 30px;
            /* thanh ngáº¯n nháº¥t */
            margin-top: 5px;
            /* cÃ¡ch Ä‘áº§u */
            margin-bottom: 5px;
            /* cÃ¡ch cuá»‘i */
        }

        .navbar::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 3px;
            min-width: 30px;
            /* thanh ngang ngáº¯n */
            margin-left: 5px;
            margin-right: 5px;
        }

        /* Khu vá»±c scrollable */
        .sidebar,
        .main-content {
            overflow-y: auto;
            overflow-x: hidden;
        }

        .navbar {
            overflow: visible;
            /* â­ QUAN TRá»ŒNG */
        }

        /* Khi JS load xong â†’ hiá»‡n ra */
        .sidebar.loaded {
            transform: translateX(0);
            /* slide vÃ o */
        }

        /* Toggle Ä‘Ã³ng â†’ chá»‰ cáº§n collapsed */
        .sidebar.collapsed {
            transform: translateX(-100%);
            /* slide ra */
        }


        /* .sidebar.hidden {
            transform: translateX(-100%);
        } */

        .sidebar h3 {
            margin-bottom: 15px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            margin-bottom: 12px;
        }

        .sidebar ul li a {
            color: #1e8807;
            text-decoration: none;
            padding: 8px 10px;
            display: block;
            border-radius: 10px;
        }

        .sidebar ul li a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .sidebar ul li a.active {
            background: rgba(255, 224, 165, 0.781);
            font-weight: 600;
        }



        .overlay {
            display: none;
            position: fixed;
            top: 90px;
            left: 0;
            width: 100%;
            height: calc(100vh - 90px);
            background: rgba(0, 0, 0, 0.4);
            z-index: 999;
        }

        .main-content {
            flex: 1;
            transition: all 0.3s ease;
            min-width: 0;
            /* Cá»°C Ká»² QUAN TRá»ŒNG */
            /* padding: 25px; */
        }

        .search-div {
            position: relative;
            display: block;
            width: 30%;
        }

        .search-box {
            display: flex;
            gap: 10px;
            /* margin-top: 25px;
            margin-bottom: 25px; */
            /* width: 50%; */
        }

        .search-box input {
            flex: 1;
            padding: 12px 15px;
            border-radius: 18px;
            border: 1px solid #ccc;
            font-size: 1rem;
            outline: none;
            text-decoration: none;
        }

        .search-box input:focus {
            border-color: #3498db;
        }

        .search-box button {
            padding: 12px 22px;
            border-radius: 18px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            color: #fff;
        }

        .search-box button:hover {
            opacity: 0.9;
        }

        .menu-toggle {
            /* display: none; */
            /* position: fixed; */
            top: 80px;
            left: 15px;
            z-index: 1100;
            font-size: 1.8rem;
            /* background: linear-gradient(90deg, #3498db, #2ecc71); */
            background: transparent;
            color: #fff;
            border: none;
            border-radius: 10px;
            /* padding: 6px 12px; */
            cursor: pointer;
        }

        /* Suggest word */
        .search-suggest {
            position: absolute;
            top: 100%;
            width: 100%;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            margin-top: 8px;
            max-height: 420px;
            overflow-y: auto;
            z-index: 2000;
        }

        .search-suggest.hidden {
            display: none;
        }

        .suggest-section {
            padding: 10px 14px;
            border-bottom: 1px solid #eee;
        }

        .suggest-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: #666;
            margin-bottom: 6px;
        }

        .suggest-item {
            padding: 8px 10px;
            border-radius: 8px;
            cursor: pointer;
        }

        .suggest-item:hover {
            background: #f2f6ff;
        }

        .word-main {
            font-weight: 600;
            font-size: 1.05rem;
        }

        .word-meaning {
            font-size: 0.85rem;
            color: #666;
        }

        .suggest-item.grammar-search {
            background: #e1ffedc7;
            color: #1e5c18;
            margin-bottom: 6px;
            border-radius: 12px;
        }

        .suggest-item.kanji-search {
            background: #dfe2fab5;
            color: #17225b;
            margin-bottom: 6px;
            border-radius: 12px;
        }
    </style>
</head>

<body>
    <div class="layout">
        <!-- ===================== -->
        <!-- Sidebar               -->
        <!-- ===================== -->

        <aside class="sidebar" id="sidebar">
            <h3> Menu</h3>
            <ul>
                <li>
                    <a class="{% if request.path == '/' %}active{% endif %}" href="/">
                        ğŸ  Trang chá»§
                    </a>
                </li>
                <li>
                    <a class="{% if request.path.startswith('/top-words') %}active{% endif %}" href="/top-words">
                        ğŸ“š Tá»« vá»±ng thÃ´ng dá»¥ng
                    </a>
                </li>
                <li>
                    <a class="{% if request.path.startswith('/kanji') %}active{% endif %}" href="/kanji">
                        ğŸˆ¶ Kanji
                    </a>
                </li>
                <li>
                    <a class="{% if request.path.startswith('/grammar') %}active{% endif %}" href="/grammar">
                        âœï¸ Ngá»¯ phÃ¡p
                    </a>
                </li>
            </ul>
            <hr>
            <ul>
                <li>
                    <a class="{% if request.path.startswith('/my-words') %}active{% endif %}" href="/my-words">
                        âœï¸ Tá»« vá»±ng cá»§a tÃ´i
                    </a>
                </li>
                <li>
                    <a class="{% if request.path.startswith('/my-grammars') %}active{% endif %}" href="/my-grammars">
                        âœï¸ Ngá»¯ phÃ¡p cá»§a tÃ´i
                    </a>
                </li>
                <li>
                    <a class="{% if request.path.startswith('/my-kanji') %}active{% endif %}" href="/my-kanji">
                        âœï¸ Kanji cá»§a tÃ´i
                    </a>
                </li>
                <li><a href="/top-words">ğŸ“š Báº£ng xáº¿p háº¡ng</a></li>
                <li><a href="/articles">ğŸˆ¶ BÃ i viáº¿t</a></li>
                <li><a href="/articles">ğŸˆ¶ Cá»™ng Ä‘á»“ng</a></li>
                <li><a href="/">ğŸ“– Game há»c tá»«</a></li>
                <li><a href="/top-words">ğŸ“š Báº£ng xáº¿p háº¡ng</a></li>
                <li><a href="/articles">ğŸˆ¶ BÃ i viáº¿t</a></li>
                <li><a href="/articles">ğŸˆ¶ Cá»™ng Ä‘á»“ng</a></li>
                <li><a href="/">ğŸ“– Game há»c tá»«</a></li>
                <li><a href="/top-words">ğŸ“š Báº£ng xáº¿p háº¡ng</a></li>
                <li><a href="/articles">ğŸˆ¶ BÃ i viáº¿t</a></li>
                <li><a href="/articles">ğŸˆ¶ Cá»™ng Ä‘á»“ng</a></li>
                <li><a href="/">ğŸ“– Game há»c tá»«</a></li>
                <li><a href="/top-words">ğŸ“š Báº£ng xáº¿p háº¡ng</a></li>
                <li><a href="/articles">ğŸˆ¶ BÃ i viáº¿t</a></li>
                <li><a href="/articles">ğŸˆ¶ Cá»™ng Ä‘á»“ng</a></li>
                <li><a href="/">ğŸ“– Game há»c tá»«</a></li>
                <li><a href="/top-words">ğŸ“š Báº£ng xáº¿p háº¡ng</a></li>
                <li><a href="/articles">ğŸˆ¶ BÃ i viáº¿t</a></li>
                <li><a href="/articles">ğŸˆ¶ Cá»™ng Ä‘á»“ng</a></li>
                <li><a href="/">ğŸ“– Game há»c tá»«</a></li>
                <li><a href="/top-words">ğŸ“š Báº£ng xáº¿p háº¡ng</a></li>
                <li><a href="/articles">ğŸˆ¶ BÃ i viáº¿t</a></li>
                <li><a href="/articles">ğŸˆ¶ Cá»™ng Ä‘á»“ng</a></li>
            </ul>
            {% if g.user and g.user.role == 'admin' %}
            <hr>

            <ul>
                <li>
                    <a href="/add-article"><span class="icon">â•</span>Add Article</a>
                </li>
            </ul>
            {% endif %}

        </aside>

        <!-- ===================== -->
        <!-- Navbar                -->
        <!-- ===================== -->
        <div class="navbar">
            <div class="logo">
                <button class="menu-toggle" id="menuToggle">â˜°</button>
                <!-- <img src="{{ url_for('static', filename='image/logo-rm.png') }}" alt="TÃ´i há»c tiáº¿ng Nháº­t"> -->
                <a href="/">toihoctiengnhat.com</span></a>
            </div>
            <div class="search-div">
                <div class="search-box">
                    <input id="key_search" type="text" placeholder="ğŸ” TÃ¬m tá»«, kanji, nghÄ©a...">
                    <button type="button" id="search-btn">TÃ¬m Kiáº¿m</button>
                </div>
                <!-- ğŸ”½ Search Suggest Result -->
                <div id="search-suggest" class="search-suggest hidden"></div>
            </div>

            <div class="user-actions">
                {% if g.user %}
                <span class="username">ğŸ‘¤&nbsp;&nbsp;{{ g.user.username }}</span>
                <a href="/logout">ğŸšª ÄÄƒng Xuáº¥t</a>
                {% else %}
                <a href="/login">ğŸ”‘ ÄÄƒng nháº­p</a>
                {% endif %}
            </div>
        </div>
        <script src="{{ url_for('static', filename='js/common.js')}}"></script>

        <!-- Ná»™i dung riÃªng tá»«ng trang -->
        <!-- Main content -->
        <main class="main-content">
            <!-- Search box riÃªng -->
            {% block content %}{% endblock %}

            <div id="word-popup"
                style="display:none; position:absolute; background:white; border:1px solid #ccc; padding:10px;"></div>

            <!-- Footer chung -->
            <div>
                <footer>
                    &copy; 2025 toihoctiengnhat.com. All rights reserved.
                    <br>
                    <a href="/about">About</a> | <a href="/contact">Contact: support@toihoctiengnhat.com</a>
                </footer>
            </div>
            <div id="toast-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">

        </main>

    </div>
    <script></script>
</body>

</html>