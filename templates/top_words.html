{% extends "layout.html" %}
{% block title %}Top Words{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/grammar.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/top.css') }}">
{% endblock %}

{% block content %}

<h1>ğŸ”¥ Top Words</h1>

<div class="container topword-container">
{% for w in words %}
    <div class="card topword-card"
         data-href="/word/{{ w.text }}"
         data-id="{{ w.word_id }}">

        <!-- WORD -->
        <div class="topword-text">
            {{ w.text }}
        </div>

        <!-- FREQ -->
        <div class="topword-freq">
            {{ w.freq }} láº§n
        </div>

        {% if g.user %}
        <div class="topword-status">
            {% if w.status == None %}
                <span class="status none">+ ChÆ°a há»c</span>
            {% elif w.status == "learning" %}
                <span class="status learning">ğŸ“˜ Äang há»c</span>
            {% elif w.status == "reviewing" %}
                <span class="status reviewing">ğŸ” Äang Ã´n</span>
            {% elif w.status == "mastered" %}
                <span class="status mastered">âœ” ÄÃ£ thuá»™c</span>
            {% elif w.status == "dropped" %}
                <span class="status dropped">âŒ ÄÃ£ bá»</span>
            {% endif %}
        </div>

        <div class="topword-actions">
            {% if w.status == None %}
                <button class="action-btn" data-action="add">+ Add</button>
            {% elif w.status == "learning" %}
                <button class="action-btn danger" data-action="drop">âŒ Bá»</button>
                <button class="action-btn" data-action="reviewing">ğŸ” Ã”n</button>
            {% elif w.status == "reviewing" %}
                <button class="action-btn danger" data-action="drop">âŒ Bá»</button>
                <button class="action-btn success" data-action="mastered">âœ” Thuá»™c</button>
            {% elif w.status in ["mastered", "dropped"] %}
                <button class="action-btn" data-action="reset">â†© Há»c láº¡i</button>
            {% endif %}
        </div>
        {% endif %}

    </div>
{% endfor %}
</div>


<div id="toast-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
</div>

{% if pagination.pages > 1 %}
<div class="pagination">
    {% if pagination.has_prev %}
    <a href="{{ url_for('top_words', page=pagination.prev_num) }}">Â« Prev</a>
    {% endif %}

    {% for page_num in pagination.iter_pages(left_edge=2, right_edge=2, left_current=2, right_current=2) %}
    {% if page_num %}
    {% if page_num == pagination.page %}
    <span class="current">{{ page_num }}</span>
    {% else %}
    <a href="{{ url_for('top_words', page=page_num) }}">{{ page_num }}</a>
    {% endif %}
    {% else %}
    <span class="dots">â€¦</span>
    {% endif %}
    {% endfor %}

    {% if pagination.has_next %}
    <a href="{{ url_for('top_words', page=pagination.next_num) }}">Next Â»</a>
    {% endif %}
</div>
{% endif %}

<script src="{{ url_for('static', filename='js/top_words.js') }}"></script>

{% endblock %}